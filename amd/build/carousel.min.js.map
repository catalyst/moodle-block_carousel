{"version":3,"sources":["../src/carousel.js"],"names":["define","$","ModalFactory","init","blockid","playspeed","show","slick","dots","infinite","speed","slidesToShow","adaptiveHeight","autoplay","autoplaySpeed","modal","rowid","modalContent","slide","document","querySelector","addEventListener","create","type","types","CANCEL","title","body","then","proxy","setLarge","videocontrol","slideid","video","slidecontainer","attr","play","pause","carousel","on"],"mappings":"AAsBAA,OAAM,2BAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,sBAAjC,CAAD,CAA2D,SAASC,CAAT,CAAYC,CAAZ,CAA0B,CACvF,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAkBC,CAAlB,CAA6B,CAC/BJ,CAAC,CAAC,YAAcG,CAAd,CAAwB,aAAzB,CAAD,CAAyCE,IAAzC,GACAL,CAAC,CAAC,YAAcG,CAAf,CAAD,CAAyBG,KAAzB,CAA+B,CAC3BC,IAAI,GADuB,CAE3BC,QAAQ,GAFmB,CAG3BC,KAAK,CAAE,GAHoB,CAI3BC,YAAY,CAAE,CAJa,CAK3BC,cAAc,GALa,CAM3BC,QAAQ,GANmB,CAO3BC,aAAa,CAAET,CAPY,CAA/B,CASH,CAZE,CAcHU,KAAK,CAAE,eAASC,CAAT,CAAgBC,CAAhB,CAA8B,CACjC,GAAIC,CAAAA,CAAK,CAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAcJ,CAArC,CAAZ,CACAE,CAAK,CAACG,gBAAN,CAAuB,OAAvB,CAAgC,UAAU,CACtCnB,CAAY,CAACoB,MAAb,CACI,CACIC,IAAI,CAAErB,CAAY,CAACsB,KAAb,CAAmBC,MAD7B,CAEIC,KAAK,CAAE,EAFX,CAGIC,IAAI,CAAEV,CAHV,CADJ,EAMEW,IANF,CAMO3B,CAAC,CAAC4B,KAAF,CAAQ,SAASd,CAAT,CAAgB,CAC3BA,CAAK,CAACe,QAAN,GACAf,CAAK,CAACT,IAAN,EACH,CAHM,CANP,CAUH,CAXD,CAYH,CA5BE,CA8BHyB,YAAY,CAAE,SAAS3B,CAAT,CAAkB4B,CAAlB,CAA2B,IACjCD,CAAAA,CAAY,CAAG,UAAW,IACtBE,CAAAA,CAAK,CAAGd,QAAQ,CAACC,aAAT,CAAuB,iBAAmBY,CAA1C,CADc,CAEtBE,CAAc,CAAGjC,CAAC,CAAC,qBAAuB+B,CAAxB,CAFI,CAG1B,GAA2C,OAAvC,GAAAE,CAAc,CAACC,IAAf,CAAoB,aAApB,CAAJ,CAAoD,CAEhDF,CAAK,CAACG,IAAN,EACH,CAHD,IAGO,CAEHH,CAAK,CAACI,KAAN,EACH,CACJ,CAXoC,CAYjCC,CAAQ,CAAGrC,CAAC,CAAC,YAAcG,CAAf,CAZqB,CAarCkC,CAAQ,CAACC,EAAT,CAAY,aAAZ,CAA2BR,CAA3B,EACAO,CAAQ,CAACC,EAAT,CAAY,MAAZ,CAAoBR,CAApB,CACH,CA7CE,CA+CV,CAhDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Load the carousel.\n *\n * @module    block_carousel/carousel\n * @copyright 2016 Brendan Heywood (brendan@catalyst-au.net)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/modal_factory', 'block_carousel/slick'], function($, ModalFactory) {\n    return {\n        init: function(blockid, playspeed) {\n            $('#carousel' + blockid + ' .slidewrap').show();\n            $('#carousel' + blockid).slick({\n                dots: true,\n                infinite: true,\n                speed: 300,\n                slidesToShow: 1,\n                adaptiveHeight: true,\n                autoplay: true,\n                autoplaySpeed: playspeed\n            });\n        },\n\n        modal: function(rowid, modalContent) {\n            var slide = document.querySelector('#id_slide' + rowid);\n            slide.addEventListener('click', function(){\n                ModalFactory.create(\n                    {\n                        type: ModalFactory.types.CANCEL,\n                        title: '',\n                        body: modalContent\n                    }\n                ).then($.proxy(function(modal) {\n                    modal.setLarge();\n                    modal.show();\n                }));\n            });\n        },\n\n        videocontrol: function(blockid, slideid) {\n            var videocontrol = function() {\n                var video = document.querySelector('#id_slidevideo' + slideid);\n                var slidecontainer = $('#id_slidecontainer' + slideid);\n                if (slidecontainer.attr('aria-hidden') === 'false') {\n                    // This is the active slide. Unpause the video with this slideID.\n                    video.play();\n                } else {\n                    // Non active slide. Pause it.\n                    video.pause();\n                }\n            };\n            var carousel = $('#carousel' + blockid);\n            carousel.on('afterChange', videocontrol);\n            carousel.on('init', videocontrol);\n        }\n    };\n});\n"],"file":"carousel.min.js"}